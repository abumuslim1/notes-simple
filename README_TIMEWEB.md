# ๐ฆ Notes Service - ะะฐะบะตั ะดะปั Timeweb Cloud

ะะพะปะฝะพัััั ะณะพัะพะฒัะน ะฟะฐะบะตั ะดะปั ัะฐะทะฒะตัััะฒะฐะฝะธั Notes Service ะฝะฐ ะพะฑะปะฐัะฝะพะผ ัะตัะฒะตัะต Timeweb Cloud ั ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ Docker.

## ๐ ะัััััะน ััะฐัั (2 ะผะธะฝััั)

### ะะฐ ะปะพะบะฐะปัะฝะพะผ ะบะพะผะฟัััะตัะต:

```bash
# 1. ะกะบะฐัะฐะนัะต ัะฐะนะป ัะบัะธะฟัะฐ ัะฐะทะฒะตัััะฒะฐะฝะธั
curl -O https://raw.githubusercontent.com/abumuslim1/notes-simple/release/deploy-timeweb.sh
chmod +x deploy-timeweb.sh
```

### ะะฐ ัะตัะฒะตัะต Timeweb Cloud:

```bash
# 1. ะะพะดะบะปััะธัะตัั ะฟะพ SSH
ssh root@your-server-ip

# 2. ะกะบะฐัะฐะนัะต ะธ ะทะฐะฟัััะธัะต ัะบัะธะฟั ัะฐะทะฒะตัััะฒะฐะฝะธั
curl -O https://raw.githubusercontent.com/abumuslim1/notes-simple/release/deploy-timeweb.sh
chmod +x deploy-timeweb.sh
sudo ./deploy-timeweb.sh

# 3. ะกะปะตะดัะนัะต ะธะฝััััะบัะธัะผ ะฝะฐ ัะบัะฐะฝะต
```

**ะะพัะพะฒะพ!** ะัะธะปะพะถะตะฝะธะต ะฑัะดะตั ะดะพัััะฟะฝะพ ะฝะฐ `http://your-server-ip:3000`

## ๐ ะกะพะดะตัะถะธะผะพะต ะฟะฐะบะตัะฐ

```
notes-service/
โโโ Dockerfile              # Docker ะพะฑัะฐะท ะฟัะธะปะพะถะตะฝะธั
โโโ docker-compose.yml      # ะะพะฝัะธะณััะฐัะธั ะดะปั Docker Compose
โโโ deploy-timeweb.sh       # ะะฒัะพะผะฐัะธัะตัะบะธะน ัะบัะธะฟั ัะฐะทะฒะตัััะฒะฐะฝะธั
โโโ TIMEWEB_DEPLOYMENT.md   # ะะพะดัะพะฑะฝะพะต ััะบะพะฒะพะดััะฒะพ
โโโ README_TIMEWEB.md       # ะญัะพั ัะฐะนะป
โโโ server/                 # ะััะพะดะฝัะน ะบะพะด ัะตัะฒะตัะฐ
โโโ client/                 # ะััะพะดะฝัะน ะบะพะด ะบะปะธะตะฝัะฐ
โโโ drizzle/                # ะกัะตะผะฐ ะะ
```

## ๐ง ะงัะพ ะดะตะปะฐะตั ัะบัะธะฟั ัะฐะทะฒะตัััะฒะฐะฝะธั

ะกะบัะธะฟั `deploy-timeweb.sh` ะฐะฒัะพะผะฐัะธัะตัะบะธ:

โ ะะฑะฝะพะฒะปัะตั ัะธััะตะผั  
โ ะฃััะฐะฝะฐะฒะปะธะฒะฐะตั Docker ะธ Docker Compose  
โ ะะปะพะฝะธััะตั ัะตะฟะพะทะธัะพัะธะน  
โ ะกะพะทะดะฐะตั ัะฐะนะป ะบะพะฝัะธะณััะฐัะธะธ `.env`  
โ ะะฐะฟััะบะฐะตั ะฟัะธะปะพะถะตะฝะธะต ะฒ Docker ะบะพะฝัะตะนะฝะตัะต  
โ ะะฟัะธะพะฝะฐะปัะฝะพ ัััะฐะฝะฐะฒะปะธะฒะฐะตั ะธ ะฝะฐัััะฐะธะฒะฐะตั Nginx  

## ๐ ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ         Timeweb Cloud Server            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ      Nginx (Reverse Proxy)       โ   โ
โ  โ  Port 80 (HTTP) / 443 (HTTPS)    โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ              โ                           โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ    Docker Container (App)        โ   โ
โ  โ  - Node.js ะฟัะธะปะพะถะตะฝะธะต            โ   โ
โ  โ  - React frontend                โ   โ
โ  โ  - tRPC API                      โ   โ
โ  โ  Port 3000                       โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ              โ                           โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ    SQLite Database               โ   โ
โ  โ  /app/data/notes.db              โ   โ
โ  โ  (ะกะพััะฐะฝัะตััั ะฒ volume)          โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐พ ะะฐะทะฐ ะดะฐะฝะฝัั

**ะขะธะฟ:** SQLite (ะฒัััะพะตะฝะฝะฐั ะฒ ะฟัะธะปะพะถะตะฝะธะต)  
**ะะฐัะฟะพะปะพะถะตะฝะธะต:** `/opt/notes-service/data/notes.db`  
**ะะตะทะตัะฒะฝะฐั ะบะพะฟะธั:** ะกะพััะฐะฝัะตััั ะฒ Docker volume `notes_data`

### ะะตะทะตัะฒะฝะฐั ะบะพะฟะธั ะะ

```bash
# ะกะพะทะดะฐะฝะธะต ัะตะทะตัะฒะฝะพะน ะบะพะฟะธะธ
docker-compose -f /opt/notes-service/docker-compose.yml exec app \
  cp /app/data/notes.db /app/data/notes.db.backup

# ะกะบะฐัะธะฒะฐะฝะธะต ะฝะฐ ะปะพะบะฐะปัะฝัะน ะบะพะผะฟัััะตั
scp root@your-server-ip:/opt/notes-service/data/notes.db.backup ./

# ะะพัััะฐะฝะพะฒะปะตะฝะธะต ะธะท ัะตะทะตัะฒะฝะพะน ะบะพะฟะธะธ
scp ./notes.db.backup root@your-server-ip:/opt/notes-service/data/
docker-compose -f /opt/notes-service/docker-compose.yml exec app \
  cp /app/data/notes.db.backup /app/data/notes.db
docker-compose -f /opt/notes-service/docker-compose.yml restart app
```

## ๐ ะะตะทะพะฟะฐัะฝะพััั

### ะะตัะฒัะน ะทะฐะฟััะบ

1. **ะะดะผะธะฝะธัััะฐัะพั:** ะะตัะฒัะน ะทะฐัะตะณะธัััะธัะพะฒะฐะฒัะธะนัั ะฟะพะปัะทะพะฒะฐัะตะปั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฟะพะปััะฐะตั ัะพะปั ะฐะดะผะธะฝะธัััะฐัะพัะฐ
2. **ะะตะณะธัััะฐัะธั:** ะะพ ัะผะพะปัะฐะฝะธั ะฟัะฑะปะธัะฝะฐั ัะตะณะธัััะฐัะธั ะพัะบะปััะตะฝะฐ
3. **JWT:** ะัะฟะพะปัะทัะตััั ะฑะตะทะพะฟะฐัะฝะพะต ัะตัะธัะพะฒะฐะฝะธะต ะฟะฐัะพะปะตะน (bcryptjs)

### ะะตะบะพะผะตะฝะดะฐัะธะธ ะดะปั production

1. **ะะทะผะตะฝะธัะต JWT_SECRET**
   ```bash
   # ะััะตะดะฐะบัะธััะนัะต ัะฐะนะป .env
   nano /opt/notes-service/.env
   
   # ะะตะฝะตัะธััะนัะต ะฝะพะฒัะน ะบะปัั
   openssl rand -base64 32
   ```

2. **ะฃััะฐะฝะพะฒะธัะต SSL ัะตััะธัะธะบะฐั**
   ```bash
   # ะัะฟะพะปัะทัะนัะต Let's Encrypt
   sudo apt-get install certbot python3-certbot-nginx
   sudo certbot certonly --nginx -d your-domain.com
   ```

3. **ะะฐัััะพะนัะต Nginx ะดะปั HTTPS**
   - ะกะผะพััะธัะต ะฟะพะดัะพะฑะฝัะต ะธะฝััััะบัะธะธ ะฒ `TIMEWEB_DEPLOYMENT.md`

4. **ะะตะณัะปััะฝัะต ัะตะทะตัะฒะฝัะต ะบะพะฟะธะธ**
   - ะกะพะทะดะฐะฒะฐะนัะต ะตะถะตะดะฝะตะฒะฝัะต ัะตะทะตัะฒะฝัะต ะบะพะฟะธะธ ะะ
   - ะกะพััะฐะฝัะนัะต ะธั ะฒ ะฑะตะทะพะฟะฐัะฝะพะผ ะผะตััะต

## ๐ ะะพะฝะธัะพัะธะฝะณ ะธ ัะฟัะฐะฒะปะตะฝะธะต

### ะัะพัะผะพัั ะปะพะณะพะฒ
```bash
# ะะพะณะธ ะฟัะธะปะพะถะตะฝะธั ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ
docker-compose -f /opt/notes-service/docker-compose.yml logs -f app

# ะะพัะปะตะดะฝะธะต 100 ัััะพะบ ะปะพะณะพะฒ
docker-compose -f /opt/notes-service/docker-compose.yml logs --tail=100 app
```

### ะัะพะฒะตัะบะฐ ััะฐัััะฐ
```bash
# ะกัะฐััั ะบะพะฝัะตะนะฝะตัะพะฒ
docker-compose -f /opt/notes-service/docker-compose.yml ps

# ะัะฟะพะปัะทะพะฒะฐะฝะธะต ัะตััััะพะฒ
docker stats
```

### ะฃะฟัะฐะฒะปะตะฝะธะต ะฟัะธะปะพะถะตะฝะธะตะผ
```bash
# ะะตัะตะทะฐะณััะทะบะฐ
docker-compose -f /opt/notes-service/docker-compose.yml restart

# ะััะฐะฝะพะฒะบะฐ
docker-compose -f /opt/notes-service/docker-compose.yml stop

# ะะฐะฟััะบ
docker-compose -f /opt/notes-service/docker-compose.yml start

# ะะพะปะฝะฐั ะฟะตัะตัะฑะพัะบะฐ
docker-compose -f /opt/notes-service/docker-compose.yml down
docker-compose -f /opt/notes-service/docker-compose.yml up -d --build
```

## ๐ ะะฑะฝะพะฒะปะตะฝะธะต ะฟัะธะปะพะถะตะฝะธั

```bash
cd /opt/notes-service

# ะะพะปััะตะฝะธะต ะฟะพัะปะตะดะฝะธั ะธะทะผะตะฝะตะฝะธะน
git pull origin release

# ะะตัะตัะฑะพัะบะฐ Docker ะพะฑัะฐะทะฐ
docker-compose down
docker-compose up -d --build

# ะัะพะฒะตัะบะฐ ััะฐัััะฐ
docker-compose ps
```

## ๐ ะะตัะตะฝะธะต ะฟัะพะฑะปะตะผ

### ะัะธะปะพะถะตะฝะธะต ะฝะต ะทะฐะฟััะบะฐะตััั

```bash
# ะัะพะฒะตัััะต ะปะพะณะธ
docker-compose -f /opt/notes-service/docker-compose.yml logs app

# ะัะพะฒะตัััะต, ะฝะต ะทะฐะฝัั ะปะธ ะฟะพัั 3000
netstat -tulpn | grep 3000

# ะะตัะตะทะฐะณััะทะธัะต ะบะพะฝัะตะนะฝะตั
docker-compose -f /opt/notes-service/docker-compose.yml restart app
```

### ะัะธะฑะบะฐ ะฟะพะดะบะปััะตะฝะธั ะบ ะะ

```bash
# ะัะพะฒะตัััะต ะดะธัะตะบัะพัะธั ะดะฐะฝะฝัั
ls -la /opt/notes-service/data/

# ะกะพะทะดะฐะนัะต ะดะธัะตะบัะพัะธั ะตัะปะธ ะตั ะฝะตั
mkdir -p /opt/notes-service/data
chmod 755 /opt/notes-service/data

# ะะตัะตะทะฐะณััะทะธัะต ะฟัะธะปะพะถะตะฝะธะต
docker-compose -f /opt/notes-service/docker-compose.yml restart app
```

### ะััะพะบะพะต ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ะฟะฐะผััะธ

```bash
# ะัะพะฒะตัััะต ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ัะตััััะพะฒ
docker stats

# ะัะธััะธัะต ะฝะตะธัะฟะพะปัะทัะตะผัะต ะพะฑัะฐะทั ะธ ะบะพะฝัะตะนะฝะตัั
docker system prune -a
```

## ๐ ะะพะดะดะตัะถะบะฐ

- **GitHub Issues:** https://github.com/abumuslim1/notes-simple/issues
- **ะะพะบัะผะตะฝัะฐัะธั:** `TIMEWEB_DEPLOYMENT.md`
- **ะะพะณะธ ะฟัะธะปะพะถะตะฝะธั:** `docker-compose logs -f app`

## ๐ ะะพะฟะพะปะฝะธัะตะปัะฝะฐั ะธะฝัะพัะผะฐัะธั

- [ะะพะบัะผะตะฝัะฐัะธั Docker](https://docs.docker.com/)
- [ะะพะบัะผะตะฝัะฐัะธั Timeweb Cloud](https://docs.timeweb.cloud/)
- [Nginx ะดะพะบัะผะตะฝัะฐัะธั](https://nginx.org/en/docs/)
- [Let's Encrypt](https://letsencrypt.org/)

## โ ะขัะตะฑะพะฒะฐะฝะธั

- **ะกะตัะฒะตั:** Timeweb Cloud (ะธะปะธ ะปัะฑะพะน Linux ัะตัะฒะตั ั Docker)
- **ะะก:** Ubuntu 20.04+ ะธะปะธ Debian 10+
- **ะะตััััั:** ะะธะฝะธะผัะผ 1 CPU, 2GB RAM, 20GB SSD
- **ะกะตัั:** ะัะบััััะต ะฟะพััั 80, 443 (ะดะปั HTTP/HTTPS)

## ๐ฏ ะงัะพ ะดะฐะปััะต?

1. **ะัะบัะพะนัะต ะฟัะธะปะพะถะตะฝะธะต:** `http://your-server-ip:3000`
2. **ะะฐัะตะณะธัััะธััะนัะต ะฟะตัะฒะพะณะพ ะฟะพะปัะทะพะฒะฐัะตะปั** (ะพะฝ ััะฐะฝะตั ะฐะดะผะธะฝะธัััะฐัะพัะพะผ)
3. **ะะบะปััะธัะต ะฟัะฑะปะธัะฝัั ัะตะณะธัััะฐัะธั** ะฒ ะฝะฐัััะพะนะบะฐั (ะพะฟัะธะพะฝะฐะปัะฝะพ)
4. **ะะฐัััะพะนัะต SSL ัะตััะธัะธะบะฐั** ะดะปั HTTPS
5. **ะกะพะทะดะฐะนัะต ัะตะทะตัะฒะฝัะต ะบะพะฟะธะธ** ะะ

## ๐ ะะธัะตะฝะทะธั

MIT
